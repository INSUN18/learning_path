# ## 第一章：概念讲解

本章节从“是什么 → 为什么 → 怎么用”的路径逐步讲解 Prompt 工程的基础概念。

---

## **1.1 Prompt 的角色定义（Role Definition）**

**是什么：**
给模型设定“你是谁”的身份，例如专家、助手、评论员。
**类比：**
就像给演员设定“角色”，决定他说话风格与知识边界。
**用途：**
让模型保持稳定、专业、风格一致的回答。

---

## **1.2 Prompt 的任务描述编写（Task Instruction）**

**是什么：**
告诉模型“你要做什么”。
**原则：**
任务要清楚、可执行、范围明确。
**类比：**
给人下任务时，如果只说“帮我处理一下”，完成质量会不稳定。模型也是如此。

---

## **1.3 Prompt 的输入格式设计（Input Format）**

**是什么：**
提前告诉模型输入信息的结构，例如 JSON、列表、问答格式。
**目的：**
减少模型误解输入内容，提高解析稳定性。

---

## **1.4 Prompt 的输出格式约束（Output Format Constraint）**

**是什么：**
限制模型按固定格式输出，例如 Markdown、JSON、步骤列表。
**作用：**
让下游程序可解析，避免杂乱输出。

---

## **1.5 Prompt 的示例数据构造（Few-shot Prompting）**

**是什么：**
在 Prompt 中给出 1～5 个示例，让模型模仿。
**为什么有效：**
模型对“模式”极度敏感，示例能快速建立样式、结构、偏好。

---

## **1.6 Prompt 的指令表达方式选择（Direct Instruction）**

**是什么：**
直接告诉模型应该做什么，而不是含糊提示。
**示例：**
❌ “你能帮我看下吗？”
✔ “请你判断以下文本的情感倾向，并输出‘正向/负向/中性’。”

---

## **1.7 Prompt 的拒答边界设定（Refusal Boundary）**

**是什么：**
明确告诉模型哪些内容不能回答。
**作用：**
减少幻觉、减少模型生成敏感或违规内容。

---

## **1.8 Prompt 的错误引导识别与优化（Error-Inducing Prompt Detection）**

**是什么：**
识别可能导致模型生成错误答案的 Prompt。
**特点：**
这些 Prompt 通常含有：

* 模糊语言
* 含糊假设
* 逻辑矛盾
* 多任务混杂

---

## **1.9 Prompt 的思维链触发技巧（Chain-of-Thought, CoT）**

**是什么：**
通过特定指令让模型展示推理过程，例如“请逐步推理”。
**效果：**
显著提升逻辑性强、步骤复杂任务的正确率。

---

## **1.10 Prompt 的系统提示（System Prompt）设计原则**

**是什么：**
System Prompt 是最上层的“全局规则”。
**特点：**

* 优先级最高
* 控制风格、身份、限制
* 影响整个对话生命周期
  **设计关键：**
  稳定、简洁、可复用、覆盖边界。

---

---

# ## 第二章：理论分析

（原理、目标、应用场景、机制和对比）

---

## **2.1 Prompt 工程的原理**

Prompt 工程是利用大模型的“条件生成能力”，通过输入文本结构与指令，引导模型输出符合预期的结果。
底层机制依赖于 Transformer 编码的文本模式匹配能力，因此：

* 输入越结构化，输出越稳定
* 示例越清晰，模仿效果越好
* 限制越明确，偏差越小

---

## **2.2 目标与应用场景**

| 目标     | 场景     | 示例                |
| ------ | ------ | ----------------- |
| 提高输出质量 | 内容生成   | 写文章、摘要、脚本         |
| 控制输出风格 | 客服机器人  | 保持礼貌、专业           |
| 限制输出风险 | 企业内部应用 | 防止泄密、避免违规         |
| 增强推理能力 | 复杂分析任务 | 数学推理、逻辑规划         |
| 减少微调成本 | 数据不足时  | Few-shot 模板替代训练数据 |

---

## **2.3 背后机制解析**

### **（1）角色定义有效的原因**

模型通过语料学到“角色—行为风格”之间的统计关系，因此角色指令能改变生成方式。

### **（2）格式约束有效的原因**

模型对结构化文本高度敏感，格式=模式，模式=强约束。

### **（3）Few-shot 有效的原因**

模型可根据示例总结任务规律，相当于“本地小样本学习”。

### **（4）CoT 有效的原因**

提示模型展开隐藏思维步骤，提高复杂任务表现。

---

## **2.4 工程意义与局限性**

### **工程价值：**

* 大幅减少微调成本
* 提高模型一致性
* 控制内容质量
* 建立可重复性模板

### **局限性：**

* Prompt 并非万能，逻辑错误仍会发生
* 指令冲突会导致不稳定输出
* 样本太少可能造成模式偏差
* 过度复杂会降低效果

---

## **2.5 方法对比（结构化表格）**

| 方法                 | 原理     | 优点    | 缺点           | 适用场景    |
| ------------------ | ------ | ----- | ------------ | ------- |
| Role Prompt        | 设置模型身份 | 稳定风格  | 影响有限         | 长对话任务   |
| Direct Instruction | 明确目标   | 可靠性高  | 要求清晰         | 结构化任务   |
| Output Constraint  | 设定输出格式 | 稳定解析  | 可能限制创造力      | JSON 输出 |
| Few-shot           | 给示例    | 模仿能力强 | 增加 Prompt 长度 | 样式模仿    |
| CoT                | 展示推理链  | 提升准确率 | 输出更长         | 复杂任务    |
| System Prompt      | 全局设定   | 控制最强  | 不适合频繁修改      | 多轮对话系统  |

---

---

# ## 第三章：实例演示

## **3.1 Prompt 示例（覆盖全部知识点）**

---

### **（1）角色定义示例**

```
你是一名专业的财经新闻分析师，擅长用简洁语言解释经济趋势。
```

---

### **（2）任务描述示例**

```
请分析以下新闻内容，并总结其中的三条主要经济影响。
```

---

### **（3）输入格式设计示例**

```
请按照以下输入格式解析内容：
【新闻内容】：<文本>
【发布时间】：<日期>
```

---

### **（4）输出格式约束示例**

```
请按如下 JSON 格式输出：
{
  "核心观点": [],
  "情绪倾向": "",
  "风险点": []
}
```

---

### **（5）Few-shot 示例**

（示例数据来源：人民日报公开新闻 [https://www.people.com.cn）](https://www.people.com.cn）)

```
示例 1：
输入：某地工业产值增长5%
输出：["产业扩张趋势明显", "制造业景气回升", "可能拉动就业增长"]

示例 2：
输入：某地出台创新政策促进科技企业发展
输出：["科技创新活跃度上升", "政策助推产业升级", "可能吸引外来投资"]
```

---

### **（6）直接指令示例**

```
请直接给出结论，不要进行额外解释。
```

---

### **（7）拒答边界示例**

```
如果用户要求预测未来股价或提供投资建议，请直接回答：
“抱歉，我不能提供股票价格预测或投资指导。”
```

---

### **（8）错误引导识别示例**

```
如果用户的问题包含未给出的事实（如“假设中国 GDP 增长率为 20%”），
请先指出该假设可能不准确，再继续分析。
```

---

### **（9）CoT 触发示例**

```
请逐步推理并解释为何该政策可能影响就业市场，最后给出总结。
```

---

### **（10）System Prompt 示例**

```
你是一名严格遵循事实的经济分析专家。
你的回答必须清晰、有依据，并避免预测性语言。
如果信息不足，请明确指出。
```

---

---

## **3.2 标准代码示例（Python API 调用）**

```python
# 示例：使用 OpenAI API 调用微调后模型（示意代码）
from openai import OpenAI
client = OpenAI()

response = client.chat.completions.create(
    model="your-fine-tuned-model",
    messages=[
        {"role": "system", "content": "你是一名可靠的经济分析助手。"},
        {"role": "user", "content": """
请根据以下输入，按 JSON 格式输出三条要点：
【新闻内容】：某地出台多项政策扶持中小企业发展。
【发布时间】：2024-02-10
"""}
    ]
)
print(response.choices[0].message["content"])
```

---

---

# ## 第四章：总结与学习路径

---

## **4.1 学习重点回顾**

* Prompt 工程核心是“稳定、可控、可复用”
* 角色定义统一风格
* 输入 / 输出格式设计提升解析质量
* Few-shot 示例是 Prompt 的“隐式训练”
* CoT 提升复杂推理能力
* System Prompt 决定全局一致性

---

## **4.2 Prompt 工程 Checklist（可直接使用）**

### **✔ 1. 是否有角色？**

专业身份、风格一致

### **✔ 2. 是否明确任务？**

动词清晰、目标单一

### **✔ 3. 是否说明输入格式？**

减少误解

### **✔ 4. 是否限制输出格式？**

结构稳定、易于解析

### **✔ 5. 是否提供示例？**

减少模型偏差

### **✔ 6. 是否设置拒答边界？**

控制风险

### **✔ 7. 是否避免模糊语言？**

减少幻觉

### **✔ 8. 是否检查用户输入假设？**

避免错误引导

### **✔ 9. 是否需要 CoT？**

复杂推理任务需开启

### **✔ 10. System Prompt 是否完善？**

确保对话一致性

---

## **4.3 常见错误与规避方法**

| 常见错误      | 造成原因    | 避免方式             |
| --------- | ------- | ---------------- |
| Prompt 过长 | 不必要信息过多 | 模块化拆分            |
| 指令冲突      | 多处设定矛盾  | 明确优先级            |
| 输出不一致     | 未制定格式   | 使用 JSON、Markdown |
| 模型乱推测     | 用户输入有假设 | 要求模型先验证假设        |
| 回答偏离主题    | 任务不明确   | 使用“你的任务是…”       |

---

## **4.4 Prompt 调试路径图**

```
明确目标
   ↓
定义角色
   ↓
确定输入格式
   ↓
设置输出格式
   ↓
编写任务指令
   ↓
添加 Few-shot 示例（可选）
   ↓
加入 CoT（复杂推理）
   ↓
设置拒答边界
   ↓
测试 → 调整 → 稳定
```